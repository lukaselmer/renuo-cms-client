(function(){"use strict";var a;a=function(){function a(){this.initializeContentBlocks(function(a){return function(){return $("a.edit").click(function(){var b=this;return a.makeContentBlockEditable($(b).parent().parent().attr("data-block"),function(){return $("a.save").click(function(){var b,c,d=this;return c=$(d).parent().parent().find("textarea").val(),b=$(d).parent().parent().attr("data-block"),a.updateContentBlock(b,c)})})})}}(this))}return a.prototype.getApiKey=function(){return"Token token=772a91a136caa729fb8e09277c05310e"},a.prototype.drawContentBlock=function(a){var b;return $("div[data-block='"+a.id+"']").replaceWith("<div data-block='"+a.id+"'></div>"),b=$("div[data-block='"+a.id+"']"),b.length>0?($(b).addClass("content-block"),$(b).append("<div class='toolbar'><a class='edit'>edit</a></div>"),$(b).append("<div class='content'>"+a.content+"</div>")):void 0},a.prototype.makeContentBlockEditable=function(a,b){return $.ajax({type:"GET",url:"http://localhost:3000/api/content_blocks/"+a+".json",beforeSend:function(a){return function(b){return b.setRequestHeader("Authorization",a.getApiKey())}}(this),dataType:"json",success:function(a){var c;return $("div[data-block='"+a.id+"']").replaceWith("<div data-block='"+a.id+"'></div>"),c=$("div[data-block='"+a.id+"']"),c.length>0?($(c).addClass("content-block"),$(c).append("<div class='toolbar'><a class='save'>save</a></div>"),$(c).append("<textarea id='block_"+a.id+"'>"+a.content+"</textarea>"),b()):void 0}})},a.prototype.initializeContentBlocks=function(a){return $.ajax({type:"GET",url:"http://localhost:3000/api/content_blocks.json",beforeSend:function(a){return function(b){return b.setRequestHeader("Authorization",a.getApiKey())}}(this),dataType:"json",success:function(b){return function(c){return $.each(c,function(c,d){return b.drawContentBlock(d),a()})}}(this)})},a.prototype.createContentBlock=function(a,b){return $.ajax({type:"POST",url:"http://localhost:3000/api/content_blocks.json",beforeSend:function(a){return function(b){return b.setRequestHeader("Authorization",a.getApiKey())}}(this),data:{content_block:{content_path:a,content:b}},dataType:"json",success:function(a){return void 0}})},a.prototype.updateContentBlock=function(a,b){return void $.ajax({type:"PUT",url:"http://localhost:3000/api/content_blocks/"+a+".json",beforeSend:function(a){return function(b){return b.setRequestHeader("Authorization",a.getApiKey())}}(this),data:{content_block:{content:b}},dataType:"json",success:function(a){return location.reload()}})},a.prototype.deleteContentBlock=function(a){return $.ajax({type:"DELETE",url:"http://localhost:3000/api/content_blocks/"+a+".json",beforeSend:function(a){return function(b){return b.setRequestHeader("Authorization",a.getApiKey())}}(this),dataType:"json",success:function(a){return void 0}})},a}(),window.renuoCmsClient=a}).call(this);