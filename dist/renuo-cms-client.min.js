(function(){var a,b,c,d,e,f,g,h,i;e=function(){return"Token token=772a91a136caa729fb8e09277c05310e"},d=function(){$.ajax({type:"GET",url:"http://localhost:3000/api/content_blocks.json",beforeSend:function(a){a.setRequestHeader("Authorization",e())},dataType:"json",success:function(a){}})},f=function(a){$.ajax({type:"GET",url:"http://localhost:3000/api/content_blocks/"+a+".json",beforeSend:function(a){a.setRequestHeader("Authorization",e())},dataType:"json",success:function(a){}})},c=function(a){var b;$("div[data-block='"+a.id+"']").replaceWith("<div data-block='"+a.id+"'></div>"),b=$("div[data-block='"+a.id+"']"),b.length>0&&($(b).addClass("content-block"),$(b).append("<div class='toolbar'><a class='edit'>edit</a></div>"),$(b).append("<div class='content'>"+a.content+"</div>"))},h=function(a,b){$.ajax({type:"GET",url:"http://localhost:3000/api/content_blocks/"+a+".json",beforeSend:function(a){a.setRequestHeader("Authorization",e())},dataType:"json",success:function(a){var c;$("div[data-block='"+a.id+"']").replaceWith("<div data-block='"+a.id+"'></div>"),c=$("div[data-block='"+a.id+"']"),c.length>0&&($(c).addClass("content-block"),$(c).append("<div class='toolbar'><a class='save'>save</a></div>"),$(c).append("<textarea id='block_"+a.id+"'>"+a.content+"</textarea>"),b())}})},g=function(a){$.ajax({type:"GET",url:"http://localhost:3000/api/content_blocks.json",beforeSend:function(a){a.setRequestHeader("Authorization",e())},dataType:"json",success:function(b){$.each(b,function(b,d){c(d),a()})}})},a=function(a,b){$.ajax({type:"POST",url:"http://localhost:3000/api/content_blocks.json",beforeSend:function(a){a.setRequestHeader("Authorization",e())},data:{content_block:{content_path:a,content:b}},dataType:"json",success:function(a){}})},i=function(a,b,c){$.ajax({type:"PUT",url:"http://localhost:3000/api/content_blocks/"+a+".json",beforeSend:function(a){a.setRequestHeader("Authorization",e())},data:{content_block:{content:b}},dataType:"json",success:function(a){}}),c()},b=function(a){$.ajax({type:"DELETE",url:"http://localhost:3000/api/content_blocks/"+a+".json",beforeSend:function(a){a.setRequestHeader("Authorization",e())},dataType:"json",success:function(a){}})},$(document).ready(function(){g(function(){$("a.edit").click(function(){var a;a=this,h($(a).parent().parent().attr("data-block"),function(){$("a.save").click(function(){var a,b,c;c=this,b=$(c).parent().parent().find("textarea").val(),a=$(c).parent().parent().attr("data-block"),i(a,b,function(){location.reload()})})})})})}),$(document).ajaxError(function(a,b,c,d){401===b.status&&($("div.wrapper").empty(),$("div.wrapper").append("<h1 class='error-message'>Zugriff verweigert! (401)</h1>"))})}).call(this);