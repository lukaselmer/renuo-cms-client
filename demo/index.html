<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Renuo CMS Client Example</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
        integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="container">
  <h1>Renuo CMS Client Examples</h1>

  <section>
    <h2>Cannot be edited</h2>
    <div class="row">
      <article class="col-sm-6">
        <h3>This exists and is cached</h3>
        <div data-content-path="some/path/to/some/content" data-api-host="//renuo-cms-api.dev:3002"
             data-api-key="aValidApiKey"></div>
      </article>
      <article class="col-sm-6">
        <h3>This doesn't exist</h3>
        <div data-content-path="some/other-path/to/some/nonexisting-content" data-api-host="//renuo-cms-api.dev:3002"
             data-api-key="aValidApiKey"></div>
      </article>
    </div>
  </section>

  <section>
    <h2>These can be edited</h2>
    <div class="row">
      <article class="col-sm-4">
        <div data-content-path="content/blub" data-api-host="//renuo-cms-api.dev:3002"
             data-api-key="aValidApiKey"
             data-private-api-key="AdminONLY"></div>
      </article>
      <article class="col-sm-4">
        <div data-content-path="content/bla" data-api-host="//renuo-cms-api.dev:3002"
             data-api-key="aValidApiKey"
             data-private-api-key="AdminONLY"></div>
      </article>
      <article class="col-sm-4">
        <div data-content-path="even-more-content"
             data-api-host="//renuo-cms-api.dev:3002"
             data-api-key="aValidApiKey"
             data-private-api-key="AdminONLY"></div>
      </article>
    </div>
  </section>

  <section>
    <h2>Corner cases</h2>

    <div class="row">
      <article class="col-sm-4">
        <h3>Same path as above, but not editable</h3>
        <div data-content-path="content/blub" data-api-host="//renuo-cms-api.dev:3002"
             data-api-key="aValidApiKey"></div>
      </article>

      <article class="col-sm-4">
        <h3>Same path as above, also editable</h3>
        <div data-content-path="content/blub" data-api-host="//renuo-cms-api.dev:3002" data-api-key="aValidApiKey"
             data-private-api-key="AdminONLY"></div>
      </article>

      <article class="col-sm-4">
        <h3>Different API Key</h3>
        <div data-content-path="content/blub" data-api-host="//renuo-cms-api.dev:3002" data-api-key="anotherPublicKey"
             data-private-api-key="SuperAdminOnly"></div>
      </article>
    </div>
  </section>

  <section>
    <h2>Default content</h2>

    <div class="row">
      <article class="col-xs-4">
        <h3>Simple default content</h3>
        <div data-content-path="content/new-default-static" data-api-host="//renuo-cms-api.dev:3002"
             data-api-key="anotherPublicKey">
          <h4>Default Content</h4>
          <p>This is some default content. It is the default when the API doesn't have a content block for it yet.</p>
        </div>
      </article>

      <article class="col-xs-4">
        <h3>Editable default content</h3>
        <div data-content-path="content/new-default-editable" data-api-host="//renuo-cms-api.dev:3002"
             data-api-key="anotherPublicKey" data-private-api-key="SuperAdminOnly">
          <h4>Editable default Content (don't save...)</h4>
          <p>This is some default content. It is the default when the API doesn't have a content block for it yet.</p>
        </div>
      </article>

      <article class="col-xs-4">
        <h3>Editable (wrong private api key)</h3>
        <div data-content-path="content/new-default-not-editable" data-api-host="//renuo-cms-api.dev:3002"
             data-api-key="anotherPublicKey" data-private-api-key="InvalidPrivateAPIKey">
          <h4>Editable default Content (cannot be saved, wrong private api key)</h4>
          <p>This is some default content. It is the default when the API doesn't have a content block for it yet.</p>
        </div>
      </article>
    </div>
  </section>

  <section>
    <h2>Lists</h2>

    <div class="row">
      <article class="col-xs-6">
        <h3>Editable list</h3>
        <div data-content-path="list-1" data-api-host="//renuo-cms-api.dev:3002" data-api-key="aValidApiKey"
             data-private-api-key="AdminONLY">
          <ul>
            <li>Some</li>
            <li>List</li>
            <li>Items</li>
          </ul>
          <p>List with items</p>
        </div>
      </article>

      <article class="col-xs-6">
        <h3>Editable list items</h3>
        <ul class="fa-ul">
          <li>
            <i class="fa-li fa fa-check-square"></i>
            <div data-content-path="list-2/li-1a" data-api-host="//renuo-cms-api.dev:3002" data-api-key="aValidApiKey"
                 data-private-api-key="AdminONLY">Some
            </div>
          </li>
          <li>
            <i class="fa-li fa fa-check-square"></i>
            <div data-content-path="list-2/li-2a" data-api-host="//renuo-cms-api.dev:3002" data-api-key="aValidApiKey"
                 data-private-api-key="AdminONLY">List
            </div>
          </li>
          <li>
            <i class="fa-li fa fa-check-square"></i>
            <div class="pull-left" data-content-path="list-2/li-3a" data-api-host="//renuo-cms-api.dev:3002"
                 data-api-key="aValidApiKey"
                 data-private-api-key="AdminONLY">Items
            </div>
          </li>
        </ul>
      </article>
    </div>
  </section>

  <section>
    <h2>Delayed editability</h2>
    <article>
      <h3>This becomes editable after 2 seconds</h3>

      <div data-content-path="i-am-late" data-api-host="//renuo-cms-api.dev:3002" data-api-key="aValidApiKey">
        <p>Some more <b>default</b> content</p>
      </div>
    </article>
  </section>

  <section>
    <h2>Delayed editability</h2>
    <article>
      <h3>This becomes editable after 5 seconds, single triggered</h3>

      <div data-content-path="i-am-single-triggered" data-api-host="//renuo-cms-api.dev:3002" data-api-key="aValidApiKey">
        <p>Some more <b>default</b> content</p>
      </div>
    </article>
  </section>

  <section>
    <h2>Dynamic content block</h2>
    <div class="row">
      <article class="col-sm-3">
        <button class="toggle-button" data-target-id="toggle-content-path-block" data-attribute="data-content-path" data-value1="content/bla" data-value2="content/blub">
          Toggle content path!
        </button>

        <div id="toggle-content-path-block" data-content-path="content/blub" data-api-host="//renuo-cms-api.dev:3002" data-api-key="aValidApiKey">
          <p>default content</p>
        </div>
      </article>
      <article class="col-sm-3">
        <button class="toggle-button" data-target-id="toggle-api-host-block" data-attribute="data-api-host" data-value1="//renuo-cms-api.dev:3002" data-value2="//special@renuo-cms-api.dev:3002">Toggle API host!</button>

        <div id="toggle-api-host-block" data-content-path="content/blub" data-api-host="//renuo-cms-api.dev:3002" data-api-key="aValidApiKey">
          <p>default content</p>
        </div>
      </article>
      <article class="col-sm-3">
        <button class="toggle-button" data-target-id="toggle-api-key-block" data-attribute="data-api-key" data-value1="aValidApiKey" data-value2="anotherPublicKey">Toggle API key!</button>

        <div id="toggle-api-key-block" data-content-path="content/blub" data-api-host="//renuo-cms-api.dev:3002" data-api-key="aValidApiKey">
          <p>default content</p>
        </div>
      </article>
      <article class="col-sm-3">
        <button class="toggle-button" data-target-id="toggle-private-api-key-block" data-attribute="data-private-api-key" data-value1="AdminONLY" data-value2="invalid">Toggle private API key!</button>

        <div id="toggle-private-api-key-block" data-content-path="content/blub" data-api-host="//renuo-cms-api.dev:3002" data-api-key="aValidApiKey" data-private-api-key="AdminONLY">
          <p>default content</p>
        </div>
      </article>
    </div>
  </section>
</div>
</body>
<script src="https://cdn.jsdelivr.net/jquery/2.2.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
        integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
        crossorigin="anonymous"></script>
<script src="renuo-cms-client.js"></script>
<script>
  setTimeout(function () {
    var div = jQuery('[data-content-path=i-am-late]').eq(0);
    div.attr('data-private-api-key', 'AdminONLY');
    jQuery(document).trigger('renuo-cms-reload');
  }, 2000);

  $('.toggle-button').click(function (event) {
    var button = $(event.target);
    var block = $('#' + button.data('targetId'));
    var attribute = button.data('attribute');
    var value1 = button.data('value1');
    var value2 = button.data('value2');

    var oldValue = block.attr(attribute);
    var newValue = oldValue == value1 ? value2 : value1;
    block.attr(attribute, newValue);
    jQuery(document).trigger('renuo-cms-reload');
  });
</script>

<script>
  setTimeout(function () {
    var div = jQuery('[data-content-path=i-am-single-triggered]').eq(0);
    div.attr('data-private-api-key', 'AdminONLY');
    jQuery(document).trigger('renuo-cms-reload-single', ['i-am-single-triggered']);
  }, 5000);
</script>
</html>
